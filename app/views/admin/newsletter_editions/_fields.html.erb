newsletterEditionForm.add({
  id: 'news_item_title',
  fieldLabel: '<%= I18n.t("shared.title") %>',
  name: 'newsletter_edition[title]',
  xtype: 'textfield',
  allowBlank: false,
  width: 400,
  value: '<%= escape_javascript @newsletter_edition.title -%>'
});

newsletterEditionForm.add({
  id: 'news_item_publication_start_date_day',
  fieldLabel: '<%= I18n.t("newsletters.date") %>',
  name: 'newsletter_edition[publication_start_date_day]',
  xtype: 'datefield',
  format: 'd-m-Y',
  width: 400,
  value: '<%= @newsletter_edition.publication_start_date.strftime("%d-%m-%Y") if @newsletter_edition.publication_start_date -%>'
});

newsletterEditionForm.add({
  id: 'newsletter_edition_publication_start_date_time',
  fieldLabel: '<%= I18n.t("newsletters.time") %>',
  name: 'newsletter_edition[publication_start_date_time]',
  xtype: 'timefield',
  format: 'H:i',
  width: 400,
  value: '<%= @newsletter_edition.publication_start_date.strftime("%H:%M") if @newsletter_edition.publication_start_date -%>'
});

/*
newsletterEditionForm.add({
  id: 'newsletter_edition_body',
  fieldLabel: '<%= I18n.t("newsletters.text") %>',
  name: 'newsletter_edition[body]',
  xtype: 'htmleditor',
  height: 150,
  width: 400,
  enableFont: false,
  enableColors: false,
  enableAlignments: false,
  enableFontSize: false,
  allowBlank: false,
  enableSourceEdit: true, // for dev purposes
  value: '<%= escape_javascript @newsletter_edition.body -%>'
});
*/

initEditor = function(e) {
	setTimeout(function() {
		<%= init_tinymce_js(@newsletter_edition.body, "newsletter_edition_body") %>
	}, 100)
}

newsletterEditionForm.add({
  xtype: 'panel',
  border: false,
  html: '<%= wrap_with_label(tinymce_html("newsletter_edition[body]", "newsletter_edition_body"),  { :text => I18n.t("newsletters.text")}) %>',
  listeners: { render: initEditor }
});
<%#= category_settings_for @newsletter_edition -%>

