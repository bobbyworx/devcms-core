- if record.is_a?(Site)
  = form.text_field :domain,         :label => t('sections.domain')
  = form.text_field :analytics_code, :label => t('sites.analytics_code'), :style => 'height: 42px;'

= form.date_field :publication_start_date_day,  :label => "#{t 'sections.begin_date'}", :value => record.publication_start_date, :allow_empty => true
= form.time_field :publication_start_date_time, :label => "#{t 'sections.begin_time'}", :value => record.publication_start_date, :allow_empty => true

= form.html_editor :description, :label => t('shared.description'), :height => 100

- if @show_frontpage_control
  = form.help_text(t(record.is_a?(Site) ? 'sections.drag_and_drop_site' : 'sections.drag_and_drop'))
  = wrap_with_label(content_tag(:div, '', :id => 'node_selector'), { :text => t('sections.frontpage_node'), :for => 'frontpage_node_id' })
  :javascript
    ndf = new Ext.dvtr.NodeDropField({
      renderTo: 'node_selector',
      ddGroup: 'TreeAndSorterDD',
      name: '#{record.is_a?(Site) ? 'site' : 'section'}[frontpage_node_id]',
      value: '#{record.frontpage_node_id || String.new}',
      text: '#{escape_javascript(record.frontpage_node.content.tree_text) rescue String.new}',
      id: '#{record.is_a?(Site) ? 'site' : 'section'}_frontpage_node_id',
      width: 60
    });

- if current_user.has_role_on?(['final_editor', 'admin'], (record.new_record? ? record.parent : record.node))
  - field_set_tag t('sections.expiration_settings') do
    = form.text_field   :expiration_email_subject, :label => t('sections.expiration_email_subject')
    = form.html_editor  :expiration_email_body,    :label => t('sections.expiration_email_body'), :height => 100